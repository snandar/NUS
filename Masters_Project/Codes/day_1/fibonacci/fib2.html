<!doctype html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Fibonacci example 2</title>
  </head>
  <body>
    <script>
		let fib;

		function loadWebAssembly(fileName) {
		  return fetch(fileName)
		    .then(response => response.arrayBuffer())
		    .then(bits => WebAssembly.compile(bits))
		    .then(module => { return new WebAssembly.Instance(module) });
		};
		  
		loadWebAssembly('fib.wasm')
		  .then(instance => {
		    fib = instance.exports.fib;
	        console.log('fib(6) = ', fib(6)); // "8"
	        console.log('fib(7) = ', fib(7)); // "13"
	        console.log('fib(8) = ', fib(8)); // "21";
		  });
    </script>
  </body>
</html>


